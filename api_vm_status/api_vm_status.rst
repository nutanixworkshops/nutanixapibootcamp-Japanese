.. _api_vm_status:

----------------------
API: 仮想マシンのステータス
----------------------

概要
++++++++

.. note::

   想定演習時間: **5 分**
 
演習: 仮想マシンのステータスを取得します。
++++++++++++++++++++

#. Postmanの + ボタンをクリックして、新しいリクエストタブを作成します。

#. HTTPメソッドにGETが選択されていることを確認します。

#. 仮想マシンのステータスを得るためにURLを入力します。

    - 前回の演習と同じURLから開始されます: https://{{prism_central_ip}}:9440/api/nutanix/v3/vms
    - URLの後ろに仮想マシンのUUIDを「/{{uuid}}」として加えてください。このUUIDは仮想マシンを作成した際に得られたものです。

    .. figure:: images/appenduuid.png

#. ベーシック認証を設定します。設定が残っていれば本手順は飛ばします。

    - **Authorization** タブをクリックし **Basic Auth** をTypeのドロップダウンから選択します。
    - プリズムのクレデンシャルを入力し **Update Request** をクリックします。:
        - **Username** - admin
        - **Password** - 講師から与えられた“Prism login password”を使います。
    - v3 API はHTTPをステートレス(状態がない)なプロトコルとして扱います。そのため、認証はAPIの呼び出しごとに毎回おこなわれます。

#. Sendボタンを押してv3 APIにリクエストを送信します。

    - レスポンスには2つの重要なパートが含まれています。:
        - Status(ステータス)には現在のエンティティ(要素)の状態が含まれています。
        - Spec(スペック)にはユーザーが望む最終的な状態が記載されています。
    - Statusに含まれるState(ステート)には、エンティティが現在の状態から最終的な状態に遷移できているかを示しています。
    - もしステートが「COMPLETE」ではなく「PENDING」であれば、もう一度Sendをクリックして状態を取得します。

    .. figure:: images/getstatus.png
